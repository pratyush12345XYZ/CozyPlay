<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Cozy Memory Game</title>
  <link rel="stylesheet" href="../style.css">
</head>

<body>
  <div class="container">
    <h1>ğŸ§  Cozy Memory</h1>
    <p class="tagline">Flip. Match. Relax.</p>

    <div class="memory-board" id="board"></div>

    <h3 id="status">Find all matching pairs ğŸ¤</h3>

    <button class="click-btn" onclick="resetGame()">Restart</button>
    <br><br>
    <a href="../index.html">â¬… Back to CozyPlay</a>
  </div>

  <script>
    const emojis = ["ğŸ","ğŸ","â˜•","â˜•","ğŸª","ğŸª","ğŸŒ¸","ğŸŒ¸"];
    let first = null;
    let second = null;
    let lock = false;
    let matched = 0;

    const board = document.getElementById("board");
    const status = document.getElementById("status");

    function shuffle(array) {
      for (let i = array.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [array[i], array[j]] = [array[j], array[i]];
      }
      return array;
    }

    function createBoard() {
      board.innerHTML = "";
      shuffle(emojis).forEach((emoji, index) => {
        const card = document.createElement("div");
        card.className = "memory-card";
        card.dataset.emoji = emoji;
        card.dataset.index = index;
        card.innerText = "â”";
        card.onclick = () => flip(card);
        board.appendChild(card);
      });
    }

    function flip(card) {
      if (lock || card === first || card.innerText !== "â”") return;

      card.innerText = card.dataset.emoji;

      if (!first) {
        first = card;
        return;
      }

      second = card;
      lock = true;

      if (first.dataset.emoji === second.dataset.emoji) {
        matched += 2;
        resetTurn();

        if (matched === emojis.length) {
          status.innerText = "You matched everything ğŸ‰";
        }
      } else {
        setTimeout(() => {
          first.innerText = "â”";
          second.innerText = "â”";
          resetTurn();
        }, 800);
      }
    }

    function resetTurn() {
      [first, second] = [null, null];
      lock = false;
    }

    function resetGame() {
      matched = 0;
      status.innerText = "Find all matching pairs ğŸ¤";
      createBoard();
    }

    createBoard();
  </script>
</body>
</html>
