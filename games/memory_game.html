<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Cozy Memory</title>

<style>
body{
  margin:0;
  min-height:100vh;
  background:#FFF7ED;
  font-family:'Segoe UI',sans-serif;
  color:#3F2E2E;
  display:flex;
  flex-direction:column;
  align-items:center;
}

/* ---------- HEADER ---------- */
h1{
  margin:20px 0 6px;
}

.stats{
  font-size:14px;
  margin-bottom:14px;
}

/* ---------- COZY BUTTONS ---------- */
.cozy-btn{
  padding:10px 20px;
  border-radius:22px;
  background:#FED7AA;
  border:none;
  cursor:pointer;
  font-size:14px;
  color:#3F2E2E;
  transition:all .2s ease;
}

.cozy-btn:hover{
  background:#F59E0B;
  color:white;
  transform:translateY(-1px);
}

/* ---------- GRID ---------- */
.grid{
  display:grid;
  gap:14px;
  margin-bottom:26px; /* space between grid & level button */
}

.card{
  width:80px;
  height:80px;
  background:#FED7AA;
  border-radius:18px;
  display:flex;
  align-items:center;
  justify-content:center;
  font-size:34px;
  cursor:pointer;
  user-select:none;
  transition:transform .15s ease, background .15s ease;
}

.card:hover{
  transform:scale(1.04);
}

.card.flipped,
.card.matched{
  background:#F59E0B;
}

/* ---------- POPUPS ---------- */
.overlay{
  position:fixed;
  inset:0;
  background:rgba(0,0,0,.35);
  display:none;
  align-items:center;
  justify-content:center;
  z-index:10;
}

.popup{
  background:#FFF7ED;
  padding:28px 32px;
  border-radius:26px;
  text-align:center;
  min-width:260px;
}

.popup h2, .popup h3{
  margin-top:0;
}

.popup .cozy-btn{
  margin:6px 0;
  width:100%;
}

/* ---------- FOOTER ---------- */
.bottom-center{
  position:fixed;
  bottom:22px;
  left:50%;
  transform:translateX(-50%);
  text-align:center;
  font-size:14px;
  color:#7A5C3E;
}

.bottom-center a{
  text-decoration:none;
  color:#F59E0B;
  font-weight:600;
  display:inline-block;
  margin-bottom:6px;
}
</style>
</head>

<body>

<h1>üß© Cozy Memory</h1>

<div class="stats">
  Moves: <span id="moves">0</span>
</div>

<!-- GAME GRID -->
<div class="grid" id="grid"></div>

<!-- LEVEL BUTTON (BELOW GRID) -->
<button class="cozy-btn" onclick="openLevels()">üéö Change Level</button>

<!-- ---------- LEVEL POPUP ---------- -->
<div class="overlay" id="levelPopup">
  <div class="popup">
    <h3>Select Difficulty</h3>
    <button class="cozy-btn" onclick="setLevel('easy')">Easy ¬∑ 4√ó4</button>
    <button class="cozy-btn" onclick="setLevel('medium')">Medium ¬∑ 6√ó6</button>
    <button class="cozy-btn" onclick="setLevel('hard')">Hard ¬∑ 8√ó8</button>
    
    <br><br>
    <button class="cozy-btn" onclick="closeLevels()">Close</button>
  </div>
</div>

<!-- ---------- WIN POPUP ---------- -->
<div class="overlay" id="winPopup">
  <div class="popup">
    <h2>üéâ You Won!</h2>
    <p>Your memory is sharp üß†‚ú®</p>
    <button class="cozy-btn" onclick="restart()">üîÅ Restart</button>
    <button class="cozy-btn" onclick="location.href='../index.html'">
      ‚¨Ö Return to CozyGames
    </button>
  </div>
</div>

<!-- ---------- FOOTER ---------- -->
<div class="bottom-center">
  <a href="../index.html">Return to CozyGames</a><br>
  Made with ‚ù§Ô∏è by Pratyush
</div>

<script>
const emojiPool = [
  "üçé","üçå","üçá","üçì","üçí","üçç","ü•ù","üçâ",
  "üçë","üçã","üçê","üçä","ü••","ü´ê","ü•ï","üåΩ",
  "üçÑ","ü•ë","üçî","üçï","üç™","üç©","üçø","üßÅ",
  "üç´","üç¨","üç≠","üç∞","üçØ","ü•®","ü•û","üßÄ",
  "üç≥","üåÆ","üåØ","üçú","üç£","üçô","üç§","üç±",
  "üçõ","üçö","üçù","ü•ó","üçñ","üçó","üå≠","ü•™",
  "üßá","üç¶","üç®","üçß","ü•Æ","üçÆ","üç°","ü•†",
  "üç¢","üßã","‚òï","üçµ","ü•§","üßÉ","üç∂","üç∫",
  "üç∑","ü•Ç","üçæ","ü•É","üç∏","üçπ"
];

const levels = {
  easy:      { size: 4 },
  medium:    { size: 6 },
  hard:      { size: 8 },

};


const grid = document.getElementById("grid");
const movesEl = document.getElementById("moves");
const winPopup = document.getElementById("winPopup");

let currentLevel = "easy";
let first=null, second=null, lock=false;
let moves=0, matched=0;

function init(){
  grid.innerHTML="";
  moves=0; matched=0;
  movesEl.textContent=0;
  first=second=null; lock=false;

  const size = levels[currentLevel].size;
  grid.style.gridTemplateColumns = `repeat(${size}, 80px)`;

  const pairs = (size * size) / 2;
  let cards = emojiPool.slice(0, pairs);
  cards = [...cards, ...cards].sort(()=>Math.random()-0.5);

  cards.forEach(icon=>{
    const c = document.createElement("div");
    c.className="card";
    c.dataset.icon=icon;
    c.onclick=()=>flip(c);
    grid.appendChild(c);
  });
}

function flip(card){
  if(lock || card.classList.contains("flipped")) return;

  card.textContent = card.dataset.icon;
  card.classList.add("flipped");

  if(!first){
    first=card;
  }else{
    second=card;
    lock=true;
    moves++; movesEl.textContent=moves;

    if(first.dataset.icon===second.dataset.icon){
      first.classList.add("matched");
      second.classList.add("matched");
      matched+=2;
      reset();
      if(matched === grid.children.length){
        setTimeout(()=>winPopup.style.display="flex",300);
      }
    }else{
      setTimeout(()=>{
        first.textContent="";
        second.textContent="";
        first.classList.remove("flipped");
        second.classList.remove("flipped");
        reset();
      },700);
    }
  }
}

function reset(){ first=second=null; lock=false; }
function restart(){ winPopup.style.display="none"; init(); }

function openLevels(){ levelPopup.style.display="flex"; }
function closeLevels(){ levelPopup.style.display="none"; }
function setLevel(lvl){
  currentLevel=lvl;
  closeLevels();
  init();
}

init();
</script>

</body>
</html>
